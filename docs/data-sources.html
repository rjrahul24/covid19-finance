<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Data sources | Analysis of the US Stock Market through the COVID-19 Lens</title>
  <meta name="description" content="Chapter 2 Data sources | Analysis of the US Stock Market through the COVID-19 Lens" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Data sources | Analysis of the US Stock Market through the COVID-19 Lens" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Data sources | Analysis of the US Stock Market through the COVID-19 Lens" />
  
  
  

<meta name="author" content="Gangadhara Reddy | Rahulraj Singh" />


<meta name="date" content="2021-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="data-transformation.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Implications of Covid-19 on US Stock Market</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#problem-statement"><i class="fa fa-check"></i><b>1.1</b> Problem Statement</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#r-packages-for-scraping-finance-data"><i class="fa fa-check"></i><b>2.1</b> R Packages for Scraping Finance Data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-sources.html"><a href="data-sources.html#the-getsymbols-function"><i class="fa fa-check"></i><b>2.1.1</b> The getSymbols() Function</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-sources.html"><a href="data-sources.html#batchgetsymbols-function"><i class="fa fa-check"></i><b>2.1.2</b> BatchGetSymbols() Function</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#structure-of-input-data"><i class="fa fa-check"></i><b>2.2</b> Structure of input Data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#additional-columns-for-calculating-stock-performance"><i class="fa fa-check"></i><b>3.1</b> Additional Columns for calculating stock performance</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#visualizing-missing-data-points"><i class="fa fa-check"></i><b>4.1</b> Visualizing missing data points</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#checking-for-missing-values-of-stocks-of-apple-and-pfizer"><i class="fa fa-check"></i><b>4.2</b> Checking for Missing Values of stocks of Apple and Pfizer</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#analysis-of-repetitive-patterns"><i class="fa fa-check"></i><b>5.1</b> Analysis of Repetitive Patterns</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#behavioural-stock-price-analytics-during-covid-19"><i class="fa fa-check"></i><b>5.2</b> Behavioural Stock Price Analytics during COVID-19</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#comparison-of-vaccine-developing-companies-against-others"><i class="fa fa-check"></i><b>5.3</b> Comparison of Vaccine Developing companies against others</a></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#solving-the-problem-statement"><i class="fa fa-check"></i><b>5.4</b> Solving the Problem Statement</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a>
<ul>
<li class="chapter" data-level="6.1" data-path="interactive-component.html"><a href="interactive-component.html#ideation-and-study-of-economic-sectors"><i class="fa fa-check"></i><b>6.1</b> Ideation and Study of Economic Sectors</a></li>
<li class="chapter" data-level="6.2" data-path="interactive-component.html"><a href="interactive-component.html#link-to-the-d3-project-source-files"><i class="fa fa-check"></i><b>6.2</b> Link to the D3 Project Source Files</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a>
<ul>
<li class="chapter" data-level="7.1" data-path="conclusion.html"><a href="conclusion.html#future-directions-and-potential-work-items"><i class="fa fa-check"></i><b>7.1</b> Future Directions and Potential Work Items</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analysis of the US Stock Market through the COVID-19 Lens</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-sources" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Data sources</h1>
<p>The primary focus of our project is to analyze the sentiment of the US Stock Market. This sentiment largely drives the prices of the stocks we will be analyzing throughout the project. The main sources of our data are Yahoo Finance and Bloomberg Finance. We have used this data in different forms throughout the project. At some places, we have downloaded the processed comma separated files provided by Yahoo Finance for historical data, while at times we have used R packages to directly scrap data from these web pages. The <a href="https://github.com/rjrahul24/covid19-finance/blob/main/02-data.Rmd">github repository</a> page for this chapter contains the code used.</p>
<p>Primary Data Sources:</p>
<ol style="list-style-type: decimal">
<li><a href="https://www.bloomberg.com/markets/stocks" class="uri">https://www.bloomberg.com/markets/stocks</a></li>
<li><a href="https://finance.yahoo.com/" class="uri">https://finance.yahoo.com/</a></li>
</ol>
<p>The CSV files we are using across this analysis are stored in the <a href="https://github.com/rjrahul24/covid19-finance/tree/main/data">data</a> folder of our repository.</p>
<div id="r-packages-for-scraping-finance-data" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> R Packages for Scraping Finance Data</h2>
<div id="the-getsymbols-function" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> The getSymbols() Function</h3>
<p>getSymbols() is a CRAN package function available in Quantmod and is a wrapper to load data from various sources, local or remote. Current src methods available for the getSymbols function are: yahoo, google, MySQL, FRED, csv, RData, oanda, and av. In the example below we would show an example with Yahoo to capture data for Appleâ€™s stock prices.</p>
<p>Below is a sample of the data we get directly using the getSymbols() function for Apple.</p>
<table>
<caption><span id="tab:unnamed-chunk-4">Table 2.1: </span>Data from getSymbols</caption>
<thead>
<tr class="header">
<th align="left">date</th>
<th align="right">AAPL.Open</th>
<th align="right">AAPL.High</th>
<th align="right">AAPL.Low</th>
<th align="right">AAPL.Close</th>
<th align="right">AAPL.Volume</th>
<th align="right">AAPL.Adjusted</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2021-03-01</td>
<td align="right">123.75</td>
<td align="right">127.93</td>
<td align="right">122.79</td>
<td align="right">127.79</td>
<td align="right">116307900</td>
<td align="right">127.1968</td>
</tr>
<tr class="even">
<td align="left">2021-03-02</td>
<td align="right">128.41</td>
<td align="right">128.72</td>
<td align="right">125.01</td>
<td align="right">125.12</td>
<td align="right">102260900</td>
<td align="right">124.5392</td>
</tr>
<tr class="odd">
<td align="left">2021-03-03</td>
<td align="right">124.81</td>
<td align="right">125.71</td>
<td align="right">121.84</td>
<td align="right">122.06</td>
<td align="right">112966300</td>
<td align="right">121.4934</td>
</tr>
<tr class="even">
<td align="left">2021-03-04</td>
<td align="right">121.75</td>
<td align="right">123.60</td>
<td align="right">118.62</td>
<td align="right">120.13</td>
<td align="right">178155000</td>
<td align="right">119.5724</td>
</tr>
<tr class="odd">
<td align="left">2021-03-05</td>
<td align="right">120.98</td>
<td align="right">121.94</td>
<td align="right">117.57</td>
<td align="right">121.42</td>
<td align="right">153766600</td>
<td align="right">120.8564</td>
</tr>
<tr class="even">
<td align="left">2021-03-08</td>
<td align="right">120.93</td>
<td align="right">121.00</td>
<td align="right">116.21</td>
<td align="right">116.36</td>
<td align="right">154376600</td>
<td align="right">115.8199</td>
</tr>
</tbody>
</table>
</div>
<div id="batchgetsymbols-function" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> BatchGetSymbols() Function</h3>
<p>Another interesting methodology of capturing data for multiple stocks at once in the BatchGetSymbols() package, made available within the same CRAN package (BatchGetSymbols). It locally stores a downloaded cache of the ticker symbols we call the function with. This data can then be used for analysis locally in the same session. Once the session is reset, we would need to run the code again to rebuild the cache.</p>
<p>After downloading the data, we can check the success of the process for each ticker. Notice that the last ticker does not exist in yahoo finance and therefore results in an error. All information regarding the download process is provided in the dataframe df.control:</p>
<table>
<caption><span id="tab:unnamed-chunk-5">Table 2.2: </span>Combined Data from BatchGetSymbol Function</caption>
<thead>
<tr class="header">
<th align="left">ticker</th>
<th align="left">src</th>
<th align="left">download.status</th>
<th align="right">total.obs</th>
<th align="right">perc.benchmark.dates</th>
<th align="left">threshold.decision</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">FB</td>
<td align="left">yahoo</td>
<td align="left">OK</td>
<td align="right">41</td>
<td align="right">1.0000000</td>
<td align="left">KEEP</td>
</tr>
<tr class="even">
<td align="left">MMM</td>
<td align="left">yahoo</td>
<td align="left">OK</td>
<td align="right">41</td>
<td align="right">1.0000000</td>
<td align="left">KEEP</td>
</tr>
<tr class="odd">
<td align="left">PETR4.SA</td>
<td align="left">yahoo</td>
<td align="left">OK</td>
<td align="right">40</td>
<td align="right">0.9512195</td>
<td align="left">KEEP</td>
</tr>
</tbody>
</table>
<p>Moreover, this data can now easily be plotted and used for manipulation as well.</p>
<p><img src="finalproj_files/figure-html/plotting%20function2-1.png" width="672" /></p>
<p>Although this is a neat method to capture data for more then one ticker in the same function the cache functionality makes it difficult to use through multiple sessions. For this reason, we would not be using this method too often. But it is still handy, when one-time stock comparisons are needed (as shown above)</p>
</div>
</div>
<div id="structure-of-input-data" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Structure of input Data</h2>
<p>Now, we will glance through the structure of the data we are going to be analyzing. Here, we have used a downloaded CSV file from Yahoo Finance that contains the same data fetched by the getSymbols() package. The downloaded CSV file can be found in the docs section.</p>
<table>
<caption><span id="tab:unnamed-chunk-6">Table 2.3: </span>Data from CSV download</caption>
<thead>
<tr class="header">
<th align="left">Date</th>
<th align="right">Open</th>
<th align="right">High</th>
<th align="right">Low</th>
<th align="right">Close</th>
<th align="right">Adj Close</th>
<th align="right">Volume</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2021-09-07</td>
<td align="right">15375.98</td>
<td align="right">15403.44</td>
<td align="right">15343.28</td>
<td align="right">15374.33</td>
<td align="right">15374.33</td>
<td align="right">3967040000</td>
</tr>
<tr class="even">
<td align="left">2021-09-08</td>
<td align="right">15360.35</td>
<td align="right">15360.35</td>
<td align="right">15206.61</td>
<td align="right">15286.64</td>
<td align="right">15286.64</td>
<td align="right">4113530000</td>
</tr>
<tr class="odd">
<td align="left">2021-09-09</td>
<td align="right">15296.06</td>
<td align="right">15352.38</td>
<td align="right">15245.17</td>
<td align="right">15248.25</td>
<td align="right">15248.25</td>
<td align="right">3997250000</td>
</tr>
<tr class="even">
<td align="left">2021-09-10</td>
<td align="right">15332.92</td>
<td align="right">15349.47</td>
<td align="right">15111.31</td>
<td align="right">15115.49</td>
<td align="right">15115.49</td>
<td align="right">4567980000</td>
</tr>
<tr class="odd">
<td align="left">2021-09-13</td>
<td align="right">15211.43</td>
<td align="right">15215.44</td>
<td align="right">15030.85</td>
<td align="right">15105.58</td>
<td align="right">15105.58</td>
<td align="right">4701190000</td>
</tr>
<tr class="even">
<td align="left">2021-09-14</td>
<td align="right">15168.45</td>
<td align="right">15181.19</td>
<td align="right">15008.30</td>
<td align="right">15037.76</td>
<td align="right">15037.76</td>
<td align="right">4571950000</td>
</tr>
</tbody>
</table>
<p>We observe that the structure of both data are the same. We would therefore, be using these interchangeably in different scenarios. Structurally, there are no further changes at this point needed to these data sources.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-transformation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rjrahul24/covid19-finance/edit/main/02-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/rjrahul24/covid19-finance/blob/main/02-data.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
